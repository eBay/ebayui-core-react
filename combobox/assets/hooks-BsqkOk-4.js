import{c as d,a as h,F as N}from"./index-Zi3BSDNR.js";import{r as s}from"./index-CBqU2yxZ.js";const k={labelElementAnimateModifier:"floating-label__label--animate",labelElementInlineModifier:"floating-label__label--inline",labelElementFocusModifier:"floating-label__label--focus",labelElementInvalidModifier:"floating-label__label--invalid",labelElementDisabledModifier:"floating-label__label--disabled",textboxElementBackgroundRGB:["rgb(255, 255, 255)","rgb(247, 247, 247)","rgb(245, 245, 245)","rgb(230, 32, 72)","rgb(254, 245, 246)","rgba(0, 0, 0, 0)"]};function B(e){if(a(e)){const l=e.querySelector("option");return l.value?null:l.text}else if(e.hasAttribute("placeholder"))return e.getAttribute("placeholder")}function c(e,l){if(a(e)){e.style["min-width"]="";const t=e.offsetWidth,n=e.querySelector("option");n.value||(n.text=l),!l&&t>e.offsetWidth&&(e.style["min-width"]=`${t}px`)}else l?e.setAttribute("placeholder",l):e.removeAttribute("placeholder")}function V(e){if(a(e)){const l=e.querySelector("option");return l.value?void 0:!!l.text}return e.hasAttribute("placeholder")}function _(){const e=m(this.formControlEl);this.placeholder=B(this.formControlEl)||this.placeholder;const l=V(this.formControlEl,this.placeholder);this.placeholder&&e&&!l?c(this.formControlEl,this.placeholder):!e&&l&&c(this.formControlEl,""),M(this.formControlEl)?this.labelEl.classList.add(this.options.labelElementInvalidModifier):this.labelEl.classList.remove(this.options.labelElementInvalidModifier),S(this.formControlEl)?this.labelEl.classList.add(this.options.labelElementDisabledModifier):this.labelEl.classList.remove(this.options.labelElementDisabledModifier)}function m(e){return document.activeElement===e}function a(e){return e.tagName==="SELECT"}function p(e){return e.value.length>0}function S(e){return e.hasAttribute("disabled")}function M(e){return e.hasAttribute("aria-invalid")&&e.getAttribute("aria-invalid")==="true"}function v(e,l){if(!a(e)){const t=getComputedStyle(e).backgroundColor;return Array.isArray(l)?!l.includes(t):t!==l}return!1}function O(){p(this.formControlEl)||this.labelEl.classList.add(this.options.labelElementInlineModifier),this.labelEl.classList.remove(this.options.labelElementFocusModifier),M(this.formControlEl)&&this.labelEl.classList.add(this.options.labelElementInvalidModifier),c(this.formControlEl,"")}function D(){this.labelEl.classList.add(this.options.labelElementAnimateModifier),this.labelEl.classList.add(this.options.labelElementFocusModifier),this.labelEl.classList.remove(this.options.labelElementInlineModifier),this.labelEl.classList.remove(this.options.labelElementInvalidModifier),this.placeholder&&c(this.formControlEl,this.placeholder)}class R{constructor(l,t){this.options=Object.assign({},k,t),this._observer=new MutationObserver(_.bind(this)),this.rootEl=l,this.labelEl=this.rootEl.querySelector("label"),this.formControlEl=this.rootEl.querySelector("input,textarea,select"),this._onBlurListener=O.bind(this),this._onFocusListener=D.bind(this),this.formControlEl.addEventListener("blur",this._onBlurListener),this.formControlEl.addEventListener("focus",this._onFocusListener),!p(this.formControlEl)&&!v(this.formControlEl,this.options.textboxElementBackgroundRGB)?this.labelEl.classList.add(this.options.labelElementInlineModifier):a(this.formControlEl)||this.labelEl.classList.remove(this.options.labelElementInlineModifier),m(this.formControlEl)&&(this.labelEl.classList.add(this.options.labelElementFocusModifier),this.labelEl.classList.remove(this.options.labelElementInlineModifier)),_.call(this),this._observer.observe(this.formControlEl,{childList:a(this.formControlEl),subtree:a(this.formControlEl),attributeFilter:["disabled","aria-invalid","placeholder","value"],attributes:!0})}destroy(){this._observer.disconnect()}refresh(){p(this.formControlEl)||a(this.formControlEl)||v(this.formControlEl,this.options.textboxElementBackgroundRGB)?this.labelEl.classList.remove(this.options.labelElementInlineModifier):this.labelEl.classList.add(this.options.labelElementInlineModifier),m(this.formControlEl)&&(this.labelEl.classList.add(this.options.labelElementFocusModifier),this.labelEl.classList.remove(this.options.labelElementInlineModifier))}}function y({text:e,disabled:l,invalid:t,size:n,type:E,opaqueLabel:C,containerTagName:F="span",onMount:x=()=>{}}){const u=s.useRef(null),o=s.useRef();s.useLayoutEffect(()=>{o.current&&o.current.refresh()}),s.useLayoutEffect(()=>{if(!(!e||E==="date"))return u.current&&(o.current=new R(u.current),x()),()=>{var i;(i=o.current)==null||i.destroy()}},[]);const g=d("floating-label",{"floating-label--large":n==="large","floating-label--opaque":C}),q=s.useCallback(({children:i})=>h(N,{children:i}),[]),I=s.useCallback(s.forwardRef(({className:i,...f},r)=>h(F,{...f,ref:b=>{u.current=b,typeof r=="function"?r(b):r&&(r.current=b)},className:d(i,g)})),[g]),L=d("floating-label__label",{"floating-label__label--disabled":l,"floating-label__label--inline":E!=="date","floating-label__label--invalid":t}),A=s.useCallback(({className:i,...f})=>h("label",{...f,className:d(i,L),children:e}),[L]);return e?{Label:A,Container:I}:{Label:()=>null,Container:q}}try{y.displayName="useFloatingLabel",y.__docgenInfo={description:"",displayName:"useFloatingLabel",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'"default" | "large"'}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},opaqueLabel:{defaultValue:null,description:"",name:"opaqueLabel",required:!1,type:{name:"boolean"}},containerTagName:{defaultValue:null,description:"",name:"containerTagName",required:!1,type:{name:'"div" | "span"'}},onMount:{defaultValue:{value:"() => {}"},description:"",name:"onMount",required:!1,type:{name:"() => void"}}}}}catch{}export{y as u};
