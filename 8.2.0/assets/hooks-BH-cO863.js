import{c as d,a as p,F as B}from"./index-Zi3BSDNR.js";import{r as s}from"./index-CBqU2yxZ.js";const V={labelElementAnimateModifier:"floating-label__label--animate",labelElementInlineModifier:"floating-label__label--inline",labelElementFocusModifier:"floating-label__label--focus",labelElementInvalidModifier:"floating-label__label--invalid",labelElementDisabledModifier:"floating-label__label--disabled",textboxElementBackgroundRGB:["rgb(255, 255, 255)","rgb(247, 247, 247)","rgb(245, 245, 245)","rgb(230, 32, 72)","rgb(254, 245, 246)","rgba(0, 0, 0, 0)"]};function S(e){if(a(e)){const l=e.querySelector("option");return l.value?null:l.text}else if(e.hasAttribute("placeholder"))return e.getAttribute("placeholder")}function u(e,l){if(a(e)){e.style["min-width"]="";const i=e.offsetWidth,o=e.querySelector("option");o.value||(o.text=l),!l&&i>e.offsetWidth&&(e.style["min-width"]=`${i}px`)}else l?e.setAttribute("placeholder",l):e.removeAttribute("placeholder")}function O(e){if(a(e)){const l=e.querySelector("option");return l.value?void 0:!!l.text}return e.hasAttribute("placeholder")}function v(){const e=E(this.formControlEl);this.placeholder=S(this.formControlEl)||this.placeholder;const l=O(this.formControlEl,this.placeholder);this.placeholder&&e&&!l?u(this.formControlEl,this.placeholder):!e&&l&&u(this.formControlEl,""),F(this.formControlEl)?this.labelEl.classList.add(this.options.labelElementInvalidModifier):this.labelEl.classList.remove(this.options.labelElementInvalidModifier),D(this.formControlEl)?this.labelEl.classList.add(this.options.labelElementDisabledModifier):this.labelEl.classList.remove(this.options.labelElementDisabledModifier)}function E(e){return document.activeElement===e}function a(e){return e.tagName==="SELECT"}function g(e){return e.value.length>0}function D(e){return e.hasAttribute("disabled")}function F(e){return e.hasAttribute("aria-invalid")&&e.getAttribute("aria-invalid")==="true"}function M(e,l){if(!a(e)){const i=getComputedStyle(e).backgroundColor;return Array.isArray(l)?!l.includes(i):i!==l}return!1}function R(){g(this.formControlEl)||this.labelEl.classList.add(this.options.labelElementInlineModifier),this.labelEl.classList.remove(this.options.labelElementFocusModifier),F(this.formControlEl)&&this.labelEl.classList.add(this.options.labelElementInvalidModifier),u(this.formControlEl,"")}function T(){this.labelEl.classList.add(this.options.labelElementAnimateModifier),this.labelEl.classList.add(this.options.labelElementFocusModifier),this.labelEl.classList.remove(this.options.labelElementInlineModifier),this.labelEl.classList.remove(this.options.labelElementInvalidModifier),this.placeholder&&u(this.formControlEl,this.placeholder)}class n{constructor(l,i){this.options=Object.assign({},V,i),this._observer=new MutationObserver(v.bind(this)),this.rootEl=l,this.labelEl=this.rootEl.querySelector("label"),this.formControlEl=this.rootEl.querySelector("input,textarea,select"),this._onBlurListener=R.bind(this),this._onFocusListener=T.bind(this),this.formControlEl.addEventListener("blur",this._onBlurListener),this.formControlEl.addEventListener("focus",this._onFocusListener),!g(this.formControlEl)&&!M(this.formControlEl,this.options.textboxElementBackgroundRGB)?this.labelEl.classList.add(this.options.labelElementInlineModifier):a(this.formControlEl)||this.labelEl.classList.remove(this.options.labelElementInlineModifier),E(this.formControlEl)&&(this.labelEl.classList.add(this.options.labelElementFocusModifier),this.labelEl.classList.remove(this.options.labelElementInlineModifier)),v.call(this),this._observer.observe(this.formControlEl,{childList:a(this.formControlEl),subtree:a(this.formControlEl),attributeFilter:["disabled","aria-invalid","placeholder","value"],attributes:!0})}destroy(){this._observer.disconnect()}refresh(){g(this.formControlEl)||a(this.formControlEl)||M(this.formControlEl,this.options.textboxElementBackgroundRGB)?this.labelEl.classList.remove(this.options.labelElementInlineModifier):this.labelEl.classList.add(this.options.labelElementInlineModifier),E(this.formControlEl)&&(this.labelEl.classList.add(this.options.labelElementFocusModifier),this.labelEl.classList.remove(this.options.labelElementInlineModifier))}}var C;const{default:G=n}=(C=n==null?void 0:n.default)!=null&&C.__esModule?n.default:n;function y({text:e,disabled:l,invalid:i,size:o,type:c,opaqueLabel:q,containerTagName:I="span",onMount:x=()=>{}}){const f=s.useRef(null),b=s.useRef();s.useLayoutEffect(()=>{var t;(t=b.current)==null||t.refresh()}),s.useLayoutEffect(()=>{if(!(!e||c==="date"))return f.current&&(b.current=new G(f.current),x()),()=>{var t;(t=b.current)==null||t.destroy()}},[e,c]);const L=d("floating-label",{"floating-label--large":o==="large","floating-label--opaque":q}),A=s.useCallback(({children:t})=>p(B,{children:t}),[]),N=s.useCallback(s.forwardRef(({className:t,...h},r)=>p(I,{...h,ref:m=>{f.current=m,typeof r=="function"?r(m):r&&(r.current=m)},className:d(t,L)})),[L]),_=d("floating-label__label",{"floating-label__label--disabled":l,"floating-label__label--inline":c!=="date","floating-label__label--invalid":i}),k=s.useCallback(({className:t,...h})=>p("label",{...h,className:d(t,_),children:e}),[_,e]);return e?{Label:k,Container:N}:{Label:()=>null,Container:A}}try{y.displayName="useFloatingLabel",y.__docgenInfo={description:"",displayName:"useFloatingLabel",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'"default" | "large"'}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},opaqueLabel:{defaultValue:null,description:"",name:"opaqueLabel",required:!1,type:{name:"boolean"}},containerTagName:{defaultValue:null,description:"",name:"containerTagName",required:!1,type:{name:'"div" | "span"'}},onMount:{defaultValue:{value:"() => {}"},description:"",name:"onMount",required:!1,type:{name:"() => void"}}}}}catch{}export{y as u};
