name: Push to Master

on:
    push:
        branches: [ master ]

jobs:
    build:
        name: Node.js latest
        uses: ./.github/workflows/build.yml
        with:
            node-version: 16.14.2
    release:
        needs: build
        name: Bump version
        uses: ./.github/workflows/release.yml
        secrets:
            githubToken: ${{ github.token }}
            npmToken: ${{ secrets.NPM_TOKEN }}
    publish-storybook:
        needs: build
        name: Publish Storybook on Github Pages
        uses: ./.github/workflows/storybook.yml
        with:
            branch: master
            githubActor: ${{ github.actor }}
        secrets:
            githubToken: ${{ github.token }}
    build-legacy:
        name: Node.js legacy
        uses: ./.github/workflows/build.yml
        with:
            node-version: 14.x

