import{c as r,a as m,F as N}from"./index-Zi3BSDNR.js";import{r as s}from"./index-CBqU2yxZ.js";const k={labelElementAnimateModifier:"floating-label__label--animate",labelElementInlineModifier:"floating-label__label--inline",labelElementFocusModifier:"floating-label__label--focus",labelElementInvalidModifier:"floating-label__label--invalid",labelElementDisabledModifier:"floating-label__label--disabled",textboxElementBackgroundRGB:["rgb(255, 255, 255)","rgb(247, 247, 247)","rgb(245, 245, 245)","rgb(230, 32, 72)","rgb(254, 245, 246)","rgba(0, 0, 0, 0)"]};function B(e){if(a(e)){const l=e.querySelector("option");return l.value?null:l.text}else if(e.hasAttribute("placeholder"))return e.getAttribute("placeholder")}function d(e,l){if(a(e)){e.style["min-width"]="";const i=e.offsetWidth,n=e.querySelector("option");n.value||(n.text=l),!l&&i>e.offsetWidth&&(e.style["min-width"]=`${i}px`)}else l?e.setAttribute("placeholder",l):e.removeAttribute("placeholder")}function V(e){if(a(e)){const l=e.querySelector("option");return l.value?void 0:!!l.text}return e.hasAttribute("placeholder")}function _(){const e=p(this.formControlEl);this.placeholder=B(this.formControlEl)||this.placeholder;const l=V(this.formControlEl,this.placeholder);this.placeholder&&e&&!l?d(this.formControlEl,this.placeholder):!e&&l&&d(this.formControlEl,""),y(this.formControlEl)?this.labelEl.classList.add(this.options.labelElementInvalidModifier):this.labelEl.classList.remove(this.options.labelElementInvalidModifier),S(this.formControlEl)?this.labelEl.classList.add(this.options.labelElementDisabledModifier):this.labelEl.classList.remove(this.options.labelElementDisabledModifier)}function p(e){return document.activeElement===e}function a(e){return e.tagName==="SELECT"}function E(e){return e.value.length>0}function S(e){return e.hasAttribute("disabled")}function y(e){return e.hasAttribute("aria-invalid")&&e.getAttribute("aria-invalid")==="true"}function v(e,l){if(!a(e)){const i=getComputedStyle(e).backgroundColor;return Array.isArray(l)?!l.includes(i):i!==l}return!1}function O(){E(this.formControlEl)||this.labelEl.classList.add(this.options.labelElementInlineModifier),this.labelEl.classList.remove(this.options.labelElementFocusModifier),y(this.formControlEl)&&this.labelEl.classList.add(this.options.labelElementInvalidModifier),d(this.formControlEl,"")}function D(){this.labelEl.classList.add(this.options.labelElementAnimateModifier),this.labelEl.classList.add(this.options.labelElementFocusModifier),this.labelEl.classList.remove(this.options.labelElementInlineModifier),this.labelEl.classList.remove(this.options.labelElementInvalidModifier),this.placeholder&&d(this.formControlEl,this.placeholder)}class R{constructor(l,i){this.options=Object.assign({},k,i),this._observer=new MutationObserver(_.bind(this)),this.rootEl=l,this.labelEl=this.rootEl.querySelector("label"),this.formControlEl=this.rootEl.querySelector("input,textarea,select"),this._onBlurListener=O.bind(this),this._onFocusListener=D.bind(this),this.formControlEl.addEventListener("blur",this._onBlurListener),this.formControlEl.addEventListener("focus",this._onFocusListener),!E(this.formControlEl)&&!v(this.formControlEl,this.options.textboxElementBackgroundRGB)?this.labelEl.classList.add(this.options.labelElementInlineModifier):a(this.formControlEl)||this.labelEl.classList.remove(this.options.labelElementInlineModifier),p(this.formControlEl)&&(this.labelEl.classList.add(this.options.labelElementFocusModifier),this.labelEl.classList.remove(this.options.labelElementInlineModifier)),_.call(this),this._observer.observe(this.formControlEl,{childList:a(this.formControlEl),subtree:a(this.formControlEl),attributeFilter:["disabled","aria-invalid","placeholder","value"],attributes:!0})}destroy(){this._observer.disconnect()}refresh(){E(this.formControlEl)||a(this.formControlEl)||v(this.formControlEl,this.options.textboxElementBackgroundRGB)?this.labelEl.classList.remove(this.options.labelElementInlineModifier):this.labelEl.classList.add(this.options.labelElementInlineModifier),p(this.formControlEl)&&(this.labelEl.classList.add(this.options.labelElementFocusModifier),this.labelEl.classList.remove(this.options.labelElementInlineModifier))}}function M({text:e,disabled:l,invalid:i,size:n,type:c,opaqueLabel:C,containerTagName:F="span",onMount:q=()=>{}}){const u=s.useRef(null),f=s.useRef();s.useLayoutEffect(()=>{var t;(t=f.current)==null||t.refresh()}),s.useLayoutEffect(()=>{if(!(!e||c==="date"))return u.current&&(f.current=new R(u.current),q()),()=>{var t;(t=f.current)==null||t.destroy()}},[e,c]);const g=r("floating-label",{"floating-label--large":n==="large","floating-label--opaque":C}),I=s.useCallback(({children:t})=>m(N,{children:t}),[]),x=s.useCallback(s.forwardRef(({className:t,...b},o)=>m(F,{...b,ref:h=>{u.current=h,typeof o=="function"?o(h):o&&(o.current=h)},className:r(t,g)})),[g]),L=r("floating-label__label",{"floating-label__label--disabled":l,"floating-label__label--inline":c!=="date","floating-label__label--invalid":i}),A=s.useCallback(({className:t,...b})=>m("label",{...b,className:r(t,L),children:e}),[L,e]);return e?{Label:A,Container:x}:{Label:()=>null,Container:I}}try{M.displayName="useFloatingLabel",M.__docgenInfo={description:"",displayName:"useFloatingLabel",props:{text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'"large" | "default"'}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},opaqueLabel:{defaultValue:null,description:"",name:"opaqueLabel",required:!1,type:{name:"boolean"}},containerTagName:{defaultValue:null,description:"",name:"containerTagName",required:!1,type:{name:'"div" | "span"'}},onMount:{defaultValue:{value:"() => {}"},description:"",name:"onMount",required:!1,type:{name:"() => void"}}}}}catch{}export{M as u};
